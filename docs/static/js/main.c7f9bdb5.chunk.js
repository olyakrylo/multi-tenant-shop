(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{29:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c(1),i=c.n(n),s=c(21),r=c.n(s),o=(c(29),c(5)),l=(c(30),c(22)),u=c.n(l),d=(c(31),c(32),c(6)),j=c(10);function _(e){var t=e.inputEmitter;return Object(a.jsxs)("div",{className:"search",children:[Object(a.jsxs)("span",{className:"search__title",children:[Object(a.jsx)(d.a,{icon:j.b}),"\xa0\xa0search"]}),Object(a.jsx)("input",{className:"search__field",onChange:function(e){return t(e.target.value)}})]})}c(38);function b(e){var t=e.name,c=e.price,n=e.item_id,i=e.picture,s=e.is_available,r=e.addToCart;return Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("div",{className:"card__content",children:[Object(a.jsx)("img",{src:"./img/".concat(i),className:"card__image",alt:""}),Object(a.jsx)("div",{className:"card__name",children:t}),Object(a.jsxs)("div",{className:"card__price",children:[c," \u20bd"]}),!s&&Object(a.jsx)("div",{className:"card__availability",children:" \u041d\u0435\u0442 \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 "})]}),s&&Object(a.jsx)("div",{className:"card__add",children:Object(a.jsx)(d.a,{onClick:function(){return r(n)},className:"card__cart",icon:j.a})})]})}var m=[{item_id:"0001",price:1e3,is_available:!0,name:"\u0411\u0443\u043a\u0435\u0442 #1",picture:"b1.jpg"},{item_id:"0002",price:1239,is_available:!0,name:"\u0411\u0443\u043a\u0435\u0442 #2",picture:"b2.jpg"},{item_id:"0003",price:1180,is_available:!1,name:"\u041c\u0435\u0433\u0430 \u0431\u0443\u043a\u0435\u0442",picture:"b3.jpg"},{item_id:"0004",price:820,is_available:!0,name:"\u0421\u0443\u043f\u0435\u0440 \u0431\u0443\u043a\u0435\u0442",picture:"b4.jpg"},{item_id:"0005",price:530,is_available:!0,name:"\u0411\u0443\u043a\u0435\u0442 #1",picture:"b1.jpg"},{item_id:"0006",price:999,is_available:!0,name:"\u0411\u0443\u043a\u0435\u0442 #2",picture:"b2.jpg"},{item_id:"0007",price:1310,is_available:!1,name:"\u041c\u0435\u0433\u0430 \u0431\u0443\u043a\u0435\u0442",picture:"b3.jpg"},{item_id:"0008",price:1999,is_available:!0,name:"\u0421\u0443\u043f\u0435\u0440 \u0431\u0443\u043a\u0435\u0442",picture:"b4.jpg"},{item_id:"0009",price:1050,is_available:!0,name:"\u0411\u0443\u043a\u0435\u0442 #1",picture:"b1.jpg"},{item_id:"0010",price:2199,is_available:!0,name:"\u0411\u0443\u043a\u0435\u0442 #2",picture:"b2.jpg"},{item_id:"0011",price:1850,is_available:!1,name:"\u041c\u0435\u0433\u0430 \u0431\u0443\u043a\u0435\u0442",picture:"b3.jpg"},{item_id:"0012",price:1530,is_available:!0,name:"\u0421\u0443\u043f\u0435\u0440 \u0431\u0443\u043a\u0435\u0442",picture:"b4.jpg"}];function p(e){var t=e.cart,c=e.setCart,i=e.cartCount,s=e.setCartCount,r=Object(n.useState)(m),l=Object(o.a)(r,2),d=l[0],j=l[1];function p(e){t[e]=t[e]?t[e]+1:1,document.cookie="cart=".concat(JSON.stringify(t)),c(t),s(++i)}var O=d.sort((function(e,t){return e.price-t.price})).map((function(e,t){var c=e.name,n=e.price,i=e.picture,s=e.is_available,r=e.item_id;return Object(a.jsx)(b,{item_id:r,name:c,price:n,picture:i,is_available:s,addToCart:p},t)}));return Object(a.jsxs)("div",{className:"main",children:[Object(a.jsx)(_,{inputEmitter:function(e){var t=e.trim().toLowerCase();j(m.filter((function(e){return e.name.toLowerCase().includes(t)})))}}),Object(a.jsxs)("div",{className:"content__count",children:["Total count: ",d.length]}),Object(a.jsx)(u.a,{columnClassName:"results__col",className:"results",breakpointCols:{default:4,1500:3,700:2,500:1},children:O})]})}c(39),c(40),c(41);var O=c(12);c(42);function h(e){var t=e.available,c=e.setAvailable;return Object(a.jsxs)("div",{className:"status",children:[Object(a.jsx)("div",{className:"status__option ".concat(t&&"status__option_selected_green"),onClick:function(){return c(!0)},children:"Available"}),Object(a.jsx)("div",{className:"status__option ".concat(!t&&"status__option_selected_red"),onClick:function(){return c(!1)},children:"Not available"})]})}c(43);function x(e){var t=e.initialSrc,c=Object(n.useRef)(null);return Object(a.jsxs)("div",{className:"image-input",children:[Object(a.jsx)("img",{ref:c,src:t,className:"image-input__image",alt:""}),Object(a.jsx)("input",{type:"file",className:"image-input__input",onInput:function(e){try{c.current.src=window.URL.createObjectURL(e.nativeEvent.target.files[0])}catch(t){return}}})]})}function f(e){var t=e.editMode,c=e.setEditMode;return Object(a.jsxs)("div",{className:"product__control",children:[Object(a.jsx)("button",{className:"product__control-btn",onClick:function(){return c(!t)},children:Object(a.jsx)(d.a,{icon:O.a})}),Object(a.jsx)("button",{className:"product__control-btn product__control-btn_red",children:Object(a.jsx)(d.a,{icon:O.d})})]})}function v(e){var t=e.item_id,c=e.name,i=e.price,s=e.picture,r=e.is_available,l=Object(n.useState)(!1),u=Object(o.a)(l,2),d=u[0],j=u[1],_=Object(n.useState)(r),b=Object(o.a)(_,2),m=b[0],p=b[1];return Object(a.jsxs)("div",{className:"product ".concat(d&&"product_edit"),children:[Object(a.jsx)("div",{className:"product__image ".concat(d&&"product__image_edit"),children:d?Object(a.jsx)(x,{initialSrc:"./img/".concat(s)}):Object(a.jsx)("img",{className:"product__image-item",alt:"",src:"./img/".concat(s)})}),Object(a.jsx)("div",{className:"product__id ".concat(d&&"product__id_edit"),children:t}),d?Object(a.jsx)("input",{className:"product__input product__name_edit",placeholder:"Name",defaultValue:c}):Object(a.jsx)("div",{className:"product__name",children:c}),d?Object(a.jsx)("input",{className:"product__input product__price_edit",defaultValue:i}):Object(a.jsxs)("div",{className:"product__price",children:[i," \u20bd\xa0\xa0\xa0",r&&Object(a.jsx)("span",{className:"product__status_available",children:"Available"}),!r&&Object(a.jsx)("span",{className:"product__status_not-available",children:"Not available"})]}),d&&Object(a.jsx)("div",{className:"product__av",children:Object(a.jsx)(h,{available:m,setAvailable:p})}),d&&Object(a.jsx)("button",{className:"product__save",children:"Save"}),Object(a.jsx)(f,{editMode:d,setEditMode:j})]})}c(44);function N(e){var t=e.setAddOpened,c=Object(n.useState)(!0),i=Object(o.a)(c,2),s=i[0],r=i[1];return Object(a.jsxs)("form",{className:"add__form",children:[Object(a.jsxs)("div",{className:"form-field form__name",children:[Object(a.jsx)("span",{className:"form-field__title",children:"name"}),Object(a.jsx)("input",{className:"form-field__input"})]}),Object(a.jsxs)("div",{className:"form-field form__price",children:[Object(a.jsx)("span",{className:"form-field__title",children:"price"}),Object(a.jsx)("input",{className:"form-field__input"})]}),Object(a.jsx)(h,{available:s,setAvailable:r}),Object(a.jsxs)("div",{className:"form__buttons",children:[Object(a.jsx)("button",{className:"form__btn form__btn_solid",children:"Add"}),Object(a.jsx)("button",{className:"form__btn form__btn_transparent",onClick:function(){return t(!1)},children:"Cancel"})]}),Object(a.jsx)("div",{className:"form__image",children:Object(a.jsx)(x,{})})]})}c(45);function g(e){var t=e.setToken,c=e.goToPath,i=Object(n.useRef)(null);return Object(a.jsxs)("form",{className:"auth",children:[Object(a.jsx)("input",{ref:i,id:"login",className:"auth__input",placeholder:"login",autoFocus:!0}),Object(a.jsx)("input",{id:"password",type:"password",className:"auth__input",placeholder:"password"}),Object(a.jsxs)("div",{className:"auth__buttons",children:[Object(a.jsx)("button",{className:"auth__button auth__button_solid",onClick:function(){var e=i.current.value;e&&(document.cookie="token=".concat(e),t(e))},children:"Auth"}),Object(a.jsx)("button",{className:"auth__button auth__button_transparent",onClick:function(){return c("/")},children:"Cancel"})]})]})}function C(e){var t=e.token,c=e.setToken,i=e.goToPath,s=Object(n.useState)(m),r=Object(o.a)(s,2),l=r[0],u=r[1],d=Object(n.useState)(!1),j=Object(o.a)(d,2),b=j[0],p=j[1];return t?Object(a.jsxs)("div",{className:"admin",children:[Object(a.jsxs)("div",{className:"admin__header ".concat(b?"admin__header_blocked":""),children:[Object(a.jsx)("button",{className:"admin__header-add",onClick:function(){return p(!0)},children:"Add product"}),Object(a.jsx)(_,{inputEmitter:function(e){var t=e.trim().toLowerCase(),c=m.filter((function(e){return e.name.toLowerCase().includes(t)||e.item_id.includes(t)}));u(c)}})]}),Object(a.jsx)("div",{className:"admin__add ".concat(b&&"admin__add_open"),children:Object(a.jsx)(N,{setAddOpened:p})}),Object(a.jsx)("ul",{className:"admin__list ".concat(b?"admin__list_blocked":""),children:l.map((function(e,t){return Object(a.jsx)("li",{className:"admin__product",children:Object(a.jsx)(v,{item_id:e.item_id,price:e.price,is_available:e.is_available,name:e.name,picture:e.picture})},t)}))})]}):Object(a.jsx)(g,{setToken:c,goToPath:i})}c(46),c(47);function k(e){var t=e.name,c=e.price,n=e.item_id,i=e.picture,s=e.amount,r=e.changeCart;return Object(a.jsxs)("div",{className:"cart-product",children:[Object(a.jsx)("img",{className:"cart-product__img",alt:"",src:"./img/".concat(i)}),Object(a.jsx)("div",{className:"cart-product__name",children:t}),Object(a.jsxs)("div",{className:"cart-product__price",children:[c," \u20bd"]}),Object(a.jsxs)("div",{className:"cart-product__control",children:[Object(a.jsx)("button",{className:"cart-product__btn cart-product__btn_red",onClick:function(){return r(n,!1)},children:Object(a.jsx)(d.a,{icon:O.b})}),Object(a.jsx)("div",{className:"cart-product__amount",children:s}),Object(a.jsx)("button",{className:"cart-product__btn cart-product__btn_green",onClick:function(){return r(n,!0)},children:Object(a.jsx)(d.a,{icon:O.c})})]})]})}function S(e){var t=e.cart,c=e.products,n=e.setCart,i=e.cartCount,s=e.setCartCount;function r(e,c){c?t[e]+=1:1===t[e]?delete t[e]:t[e]-=1,document.cookie="cart=".concat(JSON.stringify(t)),n(t),s(c?++i:--i)}var o=c.filter((function(e){return Object.keys(t).includes(e.item_id)}));return Object(a.jsxs)("div",{className:"cart",children:[Object(a.jsxs)("p",{className:"cart__title",children:[Object(a.jsx)(d.a,{icon:j.c}),"\xa0\xa0Shopping Cart"]}),Object(a.jsx)("ul",{className:"cart__list",children:o.map((function(e,c){return Object(a.jsx)("li",{className:"cart__item",children:Object(a.jsx)(k,{item_id:e.item_id,name:e.name,picture:e.picture,amount:t[e.item_id],price:e.price,is_available:e.is_available,changeCart:r})},c)}))}),Object(a.jsxs)("p",{className:"cart__sum",children:[Object(a.jsx)("span",{className:"cart__sum_light",children:"Summary: "}),o.reduce((function(e,a){var n=c.find((function(e){return e.item_id===a.item_id}));return n?e+n.price*t[a.item_id]:e}),0)," ","\u20bd"]})]})}c(48);var T="AF";function A(e){var t=e.pathname,c=e.authToken,n=e.setToken,i=e.cartCount,s=e.goToPath;return Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("button",{className:"header__name",onClick:function(){return s("/")},children:T}),c&&Object(a.jsx)("button",{className:"header__btn",onClick:function(){document.cookie="token=; max-age=-1",n("")},children:"log out"}),Object(a.jsx)("button",{className:"header__btn",onClick:function(){return s("/admin")},children:"admin"}),"/admin"!==t&&Object(a.jsxs)("button",{className:"header__cart",onClick:function(){return s("/cart")},children:[i||"","\xa0\xa0",Object(a.jsx)(d.a,{icon:j.c}),"\xa0\xa0Cart"]})]})}var w=c(3);var y=function(){var e=Object(n.useState)(function(){var e=document.cookie.match(/token=[a-zA-Z0-9]+;?/);return e?e[0].slice(6):""}()),t=Object(o.a)(e,2),c=t[0],i=t[1],s=Object(w.f)(),r=Object(n.useState)(s.location.pathname),l=Object(o.a)(r,2),u=l[0],d=l[1],j=function(){var e=document.cookie.match(/cart=[{"0-9:, ]*}/);if(!e)return{count:0,cartData:{}};var t=JSON.parse(e[0].slice(5));return{count:Object.values(t).reduce((function(e,t){return e+t}),0),cartData:t}}(),_=j.count,b=j.cartData,O=Object(n.useState)(b),h=Object(o.a)(O,2),x=h[0],f=h[1],v=Object(n.useState)(_),N=Object(o.a)(v,2),g=N[0],k=N[1];function T(e){d(e),s.push(e)}return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(A,{pathname:u,setPathname:d,authToken:c,setToken:i,cartCount:g,goToPath:T}),Object(a.jsx)("div",{className:"content",children:Object(a.jsxs)(w.c,{children:[Object(a.jsx)(w.a,{exact:!0,path:"/",render:function(){return Object(a.jsx)(p,{cart:x,setCart:f,cartCount:g,setCartCount:k})}}),Object(a.jsx)(w.a,{exact:!0,path:"/admin",render:function(){return Object(a.jsx)(C,{token:c,setToken:i,goToPath:T})}}),Object(a.jsx)(w.a,{exact:!0,path:"/cart",render:function(){return Object(a.jsx)(S,{cart:x,products:m,setCart:f,cartCount:g,setCartCount:k})}})]})})]})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,52)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),i(e),s(e)}))},L=c(16);r.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(L.a,{children:Object(a.jsx)(y,{})})}),document.getElementById("root")),P()}},[[51,1,2]]]);
//# sourceMappingURL=main.c7f9bdb5.chunk.js.map